= perl =

== 调试 ==

=== Data::Dumper ===

{{{perl
use Data::Dumper;

warn "setup_path = $setup_path\n";
warn "ASCIIO_OBJECT_SETUP = " . Dumper($ini_files->{ASCIIO_OBJECT_SETUP}) . "\n";

print STDERR DumpTree { 
	canvas_min_x => $canvas_min_x, 
	canvas_max_x => $canvas_max_x, 
	canvas_min_y => $canvas_min_y, 
	canvas_max_y => $canvas_max_y, 
	grid_width => $grid_width, 
	grid_height => $grid_height, 
	v_value => $v_value, 
	h_value => $h_value } ; 
}}}

用`warn`来打印，信息输出到标准错误，不会到标准输出。

如果打印整个数组记得加上斜杠。

{{{perl
use Data::Dumper;
warn "text_lines = " . Dumper(\@text_lines) . "\n";
}}}


=== 性能测试 ===

{{{perl
use strict;
use warnings;
use Time::HiRes qw(gettimeofday tv_interval);

# 记录开始时间
my $t0 = [gettimeofday];

# 这里放你要测试的代码
for (1..1_000_000) {
    my $x = $_ ** 2;
}

# 记录结束时间并计算间隔
my $elapsed = tv_interval($t0);

# 转换为毫秒并保留两位小数
my $ms = sprintf("%.2f", $elapsed * 1000);

print "Elapsed time: $ms ms\n";


# 或者用下面的方式

... ...
my $t0 = Time::HiRes::time() ;

... ...

my $t1 = Time::HiRes::time() ;

... ...

my $t2 = Time::HiRes::time() ;
printf STDERR "grid draw time: %0.4f sec. all gui draw time: %0.4f sec.\n", $t1 - $t0, $t2 - $t0 ;
}}}

